var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,i,r,o,s,u,c,l,a,f,p,h=e&&e.split("/"),d=y.map,g=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),s=t.length-1,y.nodeIdCompat&&w.test(t[s])&&(t[s]=t[s].replace(w,"")),t=h.slice(0,h.length-1).concat(t),a=0;a<t.length;a+=1)if(p=t[a],"."===p)t.splice(a,1),a-=1;else if(".."===p){if(1===a&&(".."===t[2]||".."===t[0]))break;a>0&&(t.splice(a-1,2),a-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||g)&&d){for(n=t.split("/"),a=n.length;a>0;a-=1){if(i=n.slice(0,a).join("/"),h)for(f=h.length;f>0;f-=1)if(r=d[h.slice(0,f).join("/")],r&&(r=r[i])){o=r,u=a;break}if(o)break;!c&&g&&g[i]&&(c=g[i],l=a)}!o&&c&&(o=c,u=l),o&&(n.splice(0,u,o),t=n.join("/"))}return t}function i(e,n){return function(){var i=m.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),a.apply(t,i.concat([e,n]))}}function r(t){return function(e){return n(e,t)}}function o(t){return function(e){h[t]=e}}function s(n){if(e(d,n)){var i=d[n];delete d[n],g[n]=!0,l.apply(t,i)}if(!e(h,n)&&!e(g,n))throw new Error("No "+n);return h[n]}function u(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function c(t){return function(){return y&&y.config&&y.config[t]||{}}}var l,a,f,p,h={},d={},y={},g={},v=Object.prototype.hasOwnProperty,m=[].slice,w=/\.js$/;f=function(t,e){var i,o=u(t),c=o[0];return t=o[1],c&&(c=n(c,e),i=s(c)),c?t=i&&i.normalize?i.normalize(t,r(e)):n(t,e):(t=n(t,e),o=u(t),c=o[0],t=o[1],c&&(i=s(c))),{f:c?c+"!"+t:t,n:t,pr:c,p:i}},p={require:function(t){return i(t)},exports:function(t){var e=h[t];return"undefined"!=typeof e?e:h[t]={}},module:function(t){return{id:t,uri:"",exports:h[t],config:c(t)}}},l=function(n,r,u,c){var l,a,y,v,m,w,b=[],$=typeof u;if(c=c||n,"undefined"===$||"function"===$){for(r=!r.length&&u.length?["require","exports","module"]:r,m=0;m<r.length;m+=1)if(v=f(r[m],c),a=v.f,"require"===a)b[m]=p.require(n);else if("exports"===a)b[m]=p.exports(n),w=!0;else if("module"===a)l=b[m]=p.module(n);else if(e(h,a)||e(d,a)||e(g,a))b[m]=s(a);else{if(!v.p)throw new Error(n+" missing "+a);v.p.load(v.n,i(c,!0),o(a),{}),b[m]=h[a]}y=u?u.apply(h[n],b):void 0,n&&(l&&l.exports!==t&&l.exports!==h[n]?h[n]=l.exports:y===t&&w||(h[n]=y))}else n&&(h[n]=u)},requirejs=require=a=function(e,n,i,r,o){if("string"==typeof e)return p[e]?p[e](n):s(f(e,n).f);if(!e.splice){if(y=e,y.deps&&a(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?l(t,e,n,i):setTimeout(function(){l(t,e,n,i)},4),a},a.config=function(t){return a(t)},requirejs._defined=h,define=function(t,n,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),e(h,t)||e(d,t)||(d[t]=[t,n,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(){define("jsonp",[],function(){return window.JSONP=function(t){var e,n;return n=0,e={},{get:function(i,r,o){var s,u,c,l,a;arguments[2]||(o=arguments[1],r={}),i+=i.indexOf("?")+1?"&":"?",s=t.getElementsByTagName("head")[0],a=t.createElement("script"),c=[],l=n,u=void 0,n++,r.callback="JSONP.callbacks.request_"+l,e["request_"+l]=function(t){s.removeChild(a),delete e["request_"+l],o(t)};for(u in r)u=u,c.push(u+"="+encodeURIComponent(r[u]));i+=c.join("&"),a.type="text/javascript",a.src=i,s.appendChild(a)},callbacks:e}}(document)})}.call(this),function(){define("search-view",["jsonp"],function(t){var e;return e=function(){function e(t,e,n,i){this.$input=t,this.searchUrl=e,this.postQuestionUrl=n,this.scope=i||"",this.isLoading=!1,this.lastQ=null,this.initContainer(),this.initEvents()}return e.prototype.initContainer=function(){return document.body.insertAdjacentHTML("beforeend",'<div class="popover bottom" id="search-results-container"><div class="arrow"></div><div class="search-results-content"></div></div>'),this.$container=document.querySelector("#search-results-container"),window.onresize=function(t){return function(){return t.onResize()}}(this)},e.prototype.onResize=function(){var t,e,n,i,r,o,s,u;return n=this.$input.getBoundingClientRect(),e={top:n.top+document.body.scrollTop,left:n.left+document.body.scrollLeft},u=window.innerWidth,r=e.top+this.$input.offsetHeight+1,e.left<=u/2?(t=e.left,600>u-t&&(s=600-(u-t),t-=s,0>t&&(t=0)),o=u-t-15,o>800&&(o=800),this.$container.style.left=t+"px",this.$container.style.top=r+"px",this.$container.style.width=o+"px"):(i=u-(e.left+this.$input.offsetWidth),(i>u||0>i)&&(i=0),o=u-i,o>800&&(o=800),this.$container.style.right=i+"px",this.$container.style.left="auto",this.$container.style.top=r+"px",this.$container.style.width=o+"px",this.$container.classList?this.$container.classList.add("anchor-right"):this.$container.className+=" anchor-right")},e.prototype.initEvents=function(){var t;return this.$container.onclick=function(t){return t.stopImmediatePropagation()},this.$input.onclick=function(t){return t.stopImmediatePropagation()},document.body.onclick=function(t){return function(){return t.shown?t.hide():void 0}}(this),this.$input.onkeyup=function(t){return function(e){if(27===e.keyCode)return t.$input.blur(),void t.hide();if(13===e.keyCode)t.submitQuestion();else if(40===e.keyCode||38===e.keyCode)return;return t.search()}}(this),this.$input.onfocus=function(t){return function(){return t.$input.value.length>0?t.show():void 0}}(this),t=document.querySelector(".create-post-btn"),t?t.onclick=function(t){return function(){return t.submitQuestion()}}(this):void 0},e.prototype.submitQuestion=function(){return window.location.href=this.postQuestionUrl+"?source=widget&text="+this.$input.value},e.prototype.show=function(){return this.onResize(),this.$container.style.display="block",this.shown=!0},e.prototype.hide=function(){return this.$container.style.display="none",this.isLoading=!1,this.shown=!1},e.prototype.reset=function(){return this.$input.val(""),this.$container.find(".search-results-content").text("")},e.prototype.search=function(){var e,n;return this.isLoading?void(3>e&&(e++,setTimeout(this.search,500))):(n=this.$input.value,""===n?void this.hide():n.length<2||n===this.lastQ?void 0:(t.get(this.searchUrl+"&q="+n+"&scope="+this.scope,function(t){return function(e){var n,i,r;return i=e.html,document.querySelector(".search-results-content").innerHTML=i,t.isLoading=!1,r=document.querySelector(".post-type"),r&&(r.value=document.querySelector("#search-results").getAttribute("data-post-type")),n=document.querySelector(".create-post-btn"),n&&(n.onclick=function(){return t.submitQuestion()}),t.shown?void 0:t.show()}}(this)),this.isLoading=!0,e=0,this.lastQ=n))},e}()})}.call(this),function(){define("querystring-utils",[],function(){var t,e,n,i,r,o,s,u,c,l,a,f;return i={},Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n,i;for(n=e||0,i=this.length;i>n;){if(this[n]===t)return n;n++}return-1}),u=Array.prototype.forEach,l=Object.keys,f=Array.prototype.slice,t={},r=function(t,e){return Object.hasOwnProperty.call(t,e)},s=l||function(t){var e;if(t!==Object(t))throw new TypeError("Invalid object");s=[];for(e in t)r(t,e)&&(s[s.length]=e);return s},n=function(e,n,i){var o,s,c;if(null!=e){if(u&&e.forEach===u)return e.forEach(n,i);if(e.length===+e.length)for(o=0,c=e.length;c>o;){if(o in e&&n.call(i,e[o],o,e)===t)return;o++}else for(s in e)if(r(e,s)&&n.call(i,e[s],s,e)===t)return}},c=Array.isArray,o=c||function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=i.deparam=function(t,e){var i,r;return r={},i={"true":!0,"false":!1,"null":null},n(t.replace(/\+/g," ").split("&"),function(t){var n,u,c,l,a,f,p;if(a=t.split("="),c=decodeURIComponent(a[0]),p=void 0,n=r,u=0,s=c.split("]["),l=s.length-1,/\[/.test(s[0])&&/\]$/.test(s[l])?(s[l]=s[l].replace(/\]$/,""),s=s.shift().split("[").concat(s),l=s.length-1):l=0,2===a.length){if(p=decodeURIComponent(a[1]),e&&(p=p&&!isNaN(p)?+p:"undefined"===p?void 0:void 0!==i[p]?i[p]:p),l){for(f=[];l>=u;)c=""===s[u]?n.length:s[u],n=n[c]=l>u?n[c]||(s[u+1]&&isNaN(s[u+1])?{}:[]):p,f.push(u++);return f}return o(r[c])?r[c].push(p):r[c]=void 0!==r[c]?[r[c],p]:p}return c?r[c]=e?void 0:"":void 0}),r},a=i.parseQueryString=function(t){var n,i;return n=document.createElement("a"),n.href=t,i=n.search.replace(/\?/,""),e(i,!0)},i})}.call(this),function(){window.mq={search:{init:function(t){return require(["search-view","querystring-utils"],function(){return function(e){return window.onload=function(){var n,i,r,o,s;return n=document.querySelector(t.selector),o=window.location.protocol+"//"+t.domain+"/search/api?source=widget",t.sso_token&&(o+="&sso_token="+t.sso_token),t.scope_slug?(r=t.scope_slug.replace(":","/"),i=window.location.protocol+"//"+t.domain+"/questions/post/question/"+r):i=window.location.protocol+"//"+t.domain+"/questions/post/question",s=new e(n,o,i,t.scope),window.getSearchView=function(){return s}}}}(this))}}}}.call(this),define("search-widget",function(){});